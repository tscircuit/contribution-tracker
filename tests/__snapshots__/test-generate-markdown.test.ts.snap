// Bun Snapshot v1, https://bun.sh/docs/test/snapshots

exports[`generateMarkdown should generate markdown with expected sections and contributor data: markdown 1`] = `
"# Contribution Overview 2024-07-01

The current week is shown below. There are 4 major sections:

- [Contributor Overview](#contributor-overview)
- [PRs by Repository](#prs-by-repository)
- [PRs by Contributor](#changes-by-contributor)
- [Scoring & Sponsorship System](#scoring--sponsorship-system)

## PRs by Repository

\`\`\`mermaid
pie
    "org/repo" : 2
    "org/another-repo" : 1
\`\`\`

## Contributor Overview

| Contributor | üê≥ Major | üêô Minor | üêå Tiny | ‚≠ê | Score | Discussion Contributions |
|-------------|---------|---------|---------|-----|----------------|--------------------------|
| [alice](#alice) | 1 | 0 | 1 | ‚≠ê | 5 | 2üîπ 1üî∂ 0üíé |
| [bob](#bob) | 0 | 1 | 0 |  | 2 | 0üîπ 0üî∂ 1üíé |

> Note: AI evaluates PRs and assigns 1-3 star ratings automatically. 4 and 5 star ratings require manual staff review.

### Discussion Contribution Legend

- üîπ Normal Comments: Basic participation with minimal effort
- üî∂ Great Informative Comments: Thoughtful participation that adds value
- üíé Incredible Comments: Exceptional participation with high-quality content

## Review Table

[reviews-received-hover]: ## "Number of reviews received for PRs for this contributor"
[approvals-received-hover]: ## "Number of approvals received for PRs this contributor authored"
[rejections-received-hover]: ## "Number of rejections received for PRs this contributor authored"
[prs-opened-hover]: ## "Number of PRs opened by this contributor"
[issues-created-hover]: ## "Number of issues created by this contributor"
[bountied-issues-hover]: ## "Number of issues this contributor created with a bounty"
[bountied-issue-$-hover]: ## "Total bounty amount placed on issues authored by this contributor"

| Contributor | Reviews Received | Approvals Received | Rejections Received | Approvals | Rejections | PRs Opened | PRs Merged | Score | Issues Created | Bountied Issues | Bountied Issue $ |
|---|---|---|---|---|---|---|---|---|---|---|---|
| [alice](#alice) | 1 | 1 | 0 | 2 | 0 | 2 | 1 | 5 | 1 | 0 | 0 |
| [bob](#bob) | 0 | 0 | 0 | 1 | 0 | 1 | 0 | 2 | 0 | 0 | 0 |

## Top 7 Repositories by Contribution Points

\`\`\`mermaid
pie
    "org/repo" : 6
    "org/another-repo" : 1
\`\`\`

## Scoring & Sponsorship System

### Overview

PRs are analyzed by AI and assigned a **star rating (1-3 stars)**. 4 and 5 star ratings can only be manually assigned by staff. Weekly scores use \`2^(starRating - 1)\` per PR (capped at 12 PRs per rating), plus review/discussion points.

### Weekly Score ‚Üí Star String

| Score Range | Star String | Count Value |
|------------|-------------|-------------|
| 0-3 | (empty) | 0 stars |
| 4-10 | ‚≠ê | 1 star |
| 11-30 | ‚≠ê‚≠ê | 2 stars |
| 31-50 | ‚≠ê‚≠ê‚≠ê | 3 stars |
| 51-75 | üëë | 1 crown |
| 76-100 | üëëüëë | 2 crowns |
| 101+ | üëëüëëüëë | 3 crowns |

> Crowns count as 3 stars for sponsorship.

### Monthly Sponsorship Calculation

The sponsorship system calculates monthly payments based on your **weekly star counts** over the complete weeks in that month (typically 4-5 weeks, Wednesday-Tuesday format).

**Step 1: Collect Weekly Stars**
- All complete weeks in the month are analyzed
- Each week's star string is converted to a numeric count (1 ‚≠ê = 1 star, üëë = 3 stars)
- Example: \`[2, 2, 2, 1, 0]\` means 2 stars in week 1, 2 stars in week 2, etc.

**Step 2: Calculate Metrics**
- **Median stars**: The median value of all weekly star counts
- **Min stars**: The minimum weekly star count
- **Max stars**: The maximum weekly star count
- **High score**: The maximum raw weekly score (0-100+ range from the scoring table) from any week in the month

**Step 3: Determine Base Amount**
The sponsorship amount is calculated based on these metrics (checked in order):

| Condition | Base Amount |
|-----------|-------------|
| \`minStarCount >= 3\` | **$500** |
| \`medianStars >= 3\` | **$450** |
| \`medianStars >= 2.5\` | **$300** |
| \`medianStars >= 2\` | **$200** |
| \`medianStars >= 1.5\` | **$100** |
| \`medianStars >= 1\` | **$75** |
| \`maxStarCount >= 2\` | **$25** |
| \`maxStarCount >= 1\` | **$15** |
| \`highScore >= 3\` (and all stars = 0) | **$5** |

| Maintainer Level | Monthly Bonus |
|------------------|---------------|
| Level 1 | **$200** |
| Level 2 | **$350** |
| Level 3 | **$500** |

**Final Amount** = Base Amount + Maintainer Bonus

## Changes by Repository

### [org/repo](https://github.com/org/repo)

| PR # | Impact | Rating | Contributor | Description |
|------|--------|--------|-------------|-------------|
| [#1](https://github.com/org/repo/pull/1) | üê≥ Major | ‚≠ê‚≠ê‚≠ê | alice | Add feature X |
| [#2](https://github.com/org/repo/pull/2) | üêô Minor | ‚≠ê‚≠ê | bob | Fix bug Y |

### [org/another-repo](https://github.com/org/another-repo)


<details>
<summary>üêå Tiny Contributions (1)</summary>

| PR # | Impact | Contributor | Description |
|------|--------|-------------|-------------|
| [#3](https://github.com/org/another-repo/pull/3) | üêå Tiny | alice | Update docs |

</details>

## Changes by Contributor

### [alice](https://github.com/alice)

| PRs # | Impact | Rating | Description |
|------|--------|--------|-------------|
| [#1](https://github.com/org/repo/pull/1) | üê≥ Major | ‚≠ê‚≠ê‚≠ê | Add feature X |

<details>
<summary>üêå Tiny Contributions (1)</summary>

| PR # | Impact | Description |
|------|--------|-------------|
| [#3](https://github.com/org/another-repo/pull/3) | üêå Tiny | Update docs |

</details>

### [bob](https://github.com/bob)

| PRs # | Impact | Rating | Description |
|------|--------|--------|-------------|
| [#2](https://github.com/org/repo/pull/2) | üêô Minor | ‚≠ê‚≠ê | Fix bug Y |

## Repository Owners

| Repository | Codeowners |
|------------|------------|
| [gyromug](https://github.com/tscircuit/gyromug/blob/main/.github/CODEOWNERS) | [alice](https://github.com/alice), [bob](https://github.com/bob)
| [schematic-corpus](https://github.com/tscircuit/schematic-corpus/blob/main/.github/CODEOWNERS) | [Abse2001](https://github.com/Abse2001), [alice](https://github.com/alice)

## Repositories by Owner

| User | Repo |
|------|------|
| [alice](https://github.com/alice) | [gyromug](https://github.com/tscircuit/gyromug/blob/main/.github/CODEOWNERS) |
|  | [schematic-corpus](https://github.com/tscircuit/schematic-corpus/blob/main/.github/CODEOWNERS) |
| [bob](https://github.com/bob) | [gyromug](https://github.com/tscircuit/gyromug/blob/main/.github/CODEOWNERS) |
| [Abse2001](https://github.com/Abse2001) | [schematic-corpus](https://github.com/tscircuit/schematic-corpus/blob/main/.github/CODEOWNERS) |

"
`;
